<h1>Integer Calculator</h1>

<% if flash[:error] %>
  <div class="flash-error">
    <%= flash[:error] %>
  </div>
<% end %>
<div id="calculator">
  <div class="value">
    <%= @calculator.value %>
  </div>
  <% if @history %>
    <ul class="history">
      <% @history.each do |history| %>
        <li><%= history %></li>
      <% end %>
    </ul>
  <% end %>
  <%= form_tag calculator_path, :method => 'PUT' do %>
  <%= hidden_field_tag 'value', @calculator.value %>
  <%= hidden_field_tag 'history', (@history || []).join('|') %>
  <div>
    <%= label_tag 'modify_value', 'Modify value' %>
    <%= text_field_tag 'modify_value', 0, :autocomplete => 'off' %>
  </div>
  <div>
    <%= label_tag 'operation', 'Operation' %>
    <div class="operations">
      <%= submit_tag '+', :name => 'method' %>
      <%= submit_tag '-', :name => 'method' %>
      <%= submit_tag '*', :name => 'method' %>
      <%= submit_tag '/', :name => 'method' %>
    </div>
    <div class="actions">
      <%= submit_tag '=', :name => 'method' %>
      <%= submit_tag 'C', :name => 'method' %>
    </div>
  </div>
  <% end %>
</div>

<%= link_to 'Home', root_path %>